<div class="body-bg">
    <mat-card *ngIf="!showdevicesinfo">

        <mat-card-header class="d-flex justify-content-between mat-crd-hide align-items-center ">

            <div>
                <mat-card-title>
                    <h2 class="pb-0 mb-0 fw-bold text-capitalize ps-2">List
                    </h2>
                </mat-card-title>
            </div>
            <div class="filter-cont pb-0 mb-0">
                <mat-form-field class="mat-form-filte pb-0 mb-0 ">
                    <mat-label class="filter-box pb-0 mb-0 ">Filter</mat-label>
                    <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input
                        class="filetr-desc pb-0 mb-0">
                </mat-form-field>
            </div>



        </mat-card-header>
        <hr>
        <mat-card-content>
            <mat-progress-spinner [mode]="'indeterminate'" *ngIf="isLoadingResults"></mat-progress-spinner>
            <!-- <div class="mat-elevation-z8"> -->
            <table mat-table [dataSource]="dataSource" matSort>

                <!-- Progress Column -->
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate"> Name </th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.name}} </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="aggregatedCapacity">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate"> Aggregate Capacity</th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.aggregatedCapacity}} </td>
                </ng-container>

                <!-- Fruit Column -->
                <!-- <ng-container matColumnDef="buyerAddress">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fruit </th>
                        <td mat-cell *matCellDef="let row"> {{row.buyerAddress}} </td>
                    </ng-container> -->
                <!-- Progress Column -->
                <!-- <ng-container matColumnDef="capacityRange">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Capacity </th>
                        <td mat-cell *matCellDef="let row"> {{row.capacityRange}}% </td>
                    </ng-container> -->

                <!-- Name Column -->
                <ng-container matColumnDef="frequency">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate">Issuance Frequency </th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.frequency}} </td>
                </ng-container>

                <!-- Fruit Column -->
                <ng-container matColumnDef="reservationStartDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate"> Start </th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.reservationStartDate| date:'EEE d MMM y'}} </td>
                </ng-container>
                <!-- Fruit Column -->
                <ng-container matColumnDef="reservationEndDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate"> End </th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.reservationEndDate| date:'EEE d MMM y'}} </td>
                </ng-container>
                <ng-container matColumnDef="targetVolumeInMegaWattHour">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate"> Target </th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.targetVolumeInMegaWattHour}} </td>
                </ng-container>
                <!-- <ng-container matColumnDef="fuelCode">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> FuelCode </th>
                        <td mat-cell *matCellDef="let row"> {{row.fuelCode}} </td>
                    </ng-container> -->
                <ng-container matColumnDef="number Of Devices">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-truncate"> Number Of Devices </th>
                    <td mat-cell *matCellDef="let row" class="table-data-myreservation"> {{row.numberOfdevices}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef class="text-truncate">Action</th>
                    <td mat-cell *matCellDef="let row; let i=index;" class="table-data-myreservation">
                        <tr class="d-flex">
                            <!-- <a class="btn-primary d-flex me-2 align-items-center btn-pad btn btn-sm"
                                [routerLink]="['/certificate']" [queryParams]="{id: row.devicegroup_uid,name:row.name}"
                                target="_blank"><mat-icon class="fs-6 mt-2" matTooltip="Certificate"  [matTooltipPosition]="'right'"
                                aria-label="Button that displays a tooltip when focused or hovered over">visibility</mat-icon></a> -->
                            <a matTooltip="Certificate" [matTooltipPosition]="'left'"
                                aria-label="Button that displays a tooltip when focused or hovered over"
                                [routerLink]="['/certificate']" [queryParams]="{id: row.devicegroup_uid,name:row.name}">
                                <mat-icon class="fs-6 mt-2">card_membership</mat-icon></a>
                            &nbsp;&nbsp;
                            <a matTooltip="Devices" [matTooltipPosition]="'above'"
                                aria-label="Button that displays a tooltip when focused or hovered over"
                                (click)="DisplayDeviceList(row.deviceIds)"><mat-icon
                                    class="fs-6 mt-2">devices</mat-icon> </a>
                        </tr>
                        <!-- <button>certificate</button> -->

                        <!-- <button class="btn-primary btn btn-sm"  ><mat-icon>visibility</mat-icon> Devices</button> -->
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                </tr>
            </table>

            <mat-paginator [pageSize]="pageSize" aria-label="Select page of users"></mat-paginator>
            <!-- </div> -->
        </mat-card-content>
        <mat-card-footer></mat-card-footer>
    </mat-card>

    <mat-card *ngIf="showdevicesinfo">
        <mat-card-header class="d-flex justify-content-between  align-items-center">
            <mat-card-title class="d-flex justify-content-between">
                <div>
                    <h2 class="pb-0 mb-0 fw-bold text-capitalize">Device information</h2>
                </div>
            </mat-card-title>

            <div class="d-flex justify-content-end">
                <button class=" btn-content-back btn d-flex justify-content-end align-items-center btn-sm"
                    (click)="DisplayList()"><mat-icon class="fs-5 me-2 mt-1">arrow_back</mat-icon> Go
                    Back</button>
            </div>


        </mat-card-header>
        <hr>
        <mat-card-content>

            <!-- <samp style="text-align: center;">groupId:<i>{{group_uid}}</i></samp>
             -->
            <!-- <ng-container *ngFor="let item of DevicesList">

              
            </ng-container> -->

            <table mat-table [dataSource]="dataSource1" matSort>
                <ng-container matColumnDef="projectName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Project Name </th>
                    <td mat-cell *matCellDef="let row"> {{row.projectName}} </td>
                </ng-container>
                <ng-container matColumnDef="countryCode">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Country</th>
                    <td mat-cell *matCellDef="let row"> {{row.countryname}} </td>
                </ng-container>

                <ng-container matColumnDef="capacity">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Capacity(kW) </th>
                    <td mat-cell *matCellDef="let row"> {{row.capacity}} </td>
                </ng-container>

                <!-- Fruit Column -->
                <ng-container matColumnDef="createdAt">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> On Boarding Date </th>
                    <td mat-cell *matCellDef="let row"> {{row.createdAt| date:'EEE d MMM y'}} </td>
                </ng-container>
                <!-- Fruit Column -->
                <ng-container matColumnDef="commissioningDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Commissioning Date </th>
                    <td mat-cell *matCellDef="let row"> {{row.commissioningDate| date:'EEE d MMM y'}} </td>
                </ng-container>
                <ng-container matColumnDef="offTaker">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> OffTaker </th>
                    <td mat-cell *matCellDef="let row"> {{row.offTaker}} </td>
                </ng-container>
                <ng-container matColumnDef="fuelCode">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fuel Code </th>
                        <td mat-cell *matCellDef="let row"> {{row.fuelname}} </td>
                    </ng-container>
                <ng-container matColumnDef="deviceTypeCode">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Device Code </th>
                    <td mat-cell *matCellDef="let row"> {{row.devicetypename}} </td>
                </ng-container>
                <ng-container matColumnDef="SDGBenefits">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> SDGBenefits </th>
                    <td mat-cell *matCellDef="let row"> {{row.SDGBenefits}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
            </table>
        </mat-card-content>
        <mat-card-footer></mat-card-footer>
    </mat-card>
</div>